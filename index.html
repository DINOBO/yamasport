<!doctype html>
<html lang="ru">
<head>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Yama Sport — Запись на тренировки</title>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-bg: #000;
      --color-text: #fff;
      --color-muted: #aaa;
      --color-accent: #fff;
      --color-button-bg: rgba(255,255,255,0.07);
      --divider-color: #333;
      --sport-label-color: #000;
      --training-title-color: #fff;
    }

    html, body {
      margin:0;
      padding:0;
      width:100%;
      height:100%;
      font-family:'Inter', sans-serif;
      background: var(--color-bg);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      overflow:auto;
      padding-top:32px;
      color: var(--color-text);
      scroll-behavior: smooth; /* плавный скролл */
    }

    .app {
      width:420px;
      max-width:95%;
      background: linear-gradient(to bottom, rgba(0,0,0,0.0) 0%, rgba(0,0,0,0.9) 100%), url('bg0.jpg') center/cover no-repeat;
      border-radius:20px;
      padding:24px;
      box-sizing:border-box;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      backdrop-filter: blur(6px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      max-height: 90vh;
      overflow-y: auto;
      scroll-behavior: smooth; /* плавный скролл */
    }

    header h1 {
      margin:0;
      font-size:38px;
      color: var(--color-accent);
      font-weight:800;
      text-align:center;
      font-family: 'Oswald', sans-serif;
      letter-spacing:2px;
      text-transform: uppercase;
      text-shadow: none;
    }

    .section { width:100%; margin-top:24px; }

    .btn {
      width:100%;
      padding:18px;
      font-size:22px;
      font-weight:700;
      border-radius:16px;
      border:none;
      background: var(--color-button-bg);
      color: var(--color-text);
      cursor:pointer;
      backdrop-filter: blur(6px);
      margin-top:12px;
      transition: background 0.25s, transform 0.2s;
    }

    .btn:hover {
      background: rgba(255,255,255,0.12);
      transform: translateY(-2px);
    }

    .btn.small { width:auto; padding:10px 16px; font-size:16px; }

    .sport-buttons button {
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      height:130px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:32px;
      font-weight:800;
      color:#fff;
      border-radius:18px;
      text-shadow: 0 0 10px rgba(0,0,0,0.8);
      filter:none;
      transition:none;
      margin-top:16px;
    }
    .sport-buttons button[data-sport="kuresh"] { background-image: url('kuresh0.jpg'); }
    .sport-buttons button[data-sport="volley"] { background-image: url('volleyball0.jpg'); }

    .divider { width:100%; height:2px; background: var(--divider-color); margin:20px 0; border-radius:1px; }
    .footer { width:100%; text-align:center; color: var(--color-muted); font-size:14px; margin-top:12px; }

    .training-item { padding:18px; border-radius:16px; background:rgba(0,0,0,0.5); margin-top:16px; box-shadow:0 4px 12px rgba(0,0,0,0.5); }
    .training-item .title { font-size:22px; font-weight:700; margin-bottom:8px; color: var(--training-title-color); }
    .training-item .muted { font-size:16px; color: var(--color-muted); margin-bottom:6px; }

    label { display:block; margin-top:14px; font-size:18px; font-weight:500; }
    input { width: calc(100% - 28px); padding:14px; border-radius:12px; border:none; margin-top:6px; font-size:18px; background: rgba(0,0,0,0.6); color:#fff; box-sizing:border-box; }

  </style>
</head>
<body>
<div class="app" id="app">

  <!-- VIEW 1 -->
  <div id="sportView">
    <header>
      <h1>Yama Sport</h1>
      <div class="divider"></div>
      <h3>Выберите вид спорта</h3>
    </header>

    <div class="section sport-buttons">
      <button class="btn" data-sport="kuresh">Куреш</button>
      <button class="btn" data-sport="volley">Волейбол</button>
    </div>

    <div class="divider"></div>
    <div class="footer">by Aituk</div>
  </div>

  <!-- VIEW 2: тренировки -->
  <div id="trainingView" style="display:none">
    <button id="backToSport" class="small btn">← Назад</button>
    <div class="divider"></div>
    <h2>Тренировки</h2>
    <div id="trainingList"></div>
    <div class="divider"></div>
    <div class="footer">Yama Sport</div>
  </div>

  <!-- VIEW 3: бронирование -->
  <div id="bookingView" style="display:none">
    <button id="backToTrainings" class="small btn">← Назад</button>
    <div class="divider"></div>
    <h2 id="trainingTitle">Бронирование</h2>

    <label>ФИО</label>
    <input id="fio" placeholder="Иванов Иван" />

    <label>Номер телефона</label>
    <input id="phone" placeholder="+7 900 000 00 00" />

    <label>Количество человек</label>
    <input id="people" type="number" min="1" value="1" />

    <button id="confirmBtn" class="btn" style="margin-top:20px">Записаться</button>
    <div class="divider"></div>
    <div class="footer">Yama Sport</div>
  </div>

</div>

<script>
  const tg = window.Telegram.WebApp;
  tg.expand();

  const sportView = document.getElementById('sportView');
  const trainingView = document.getElementById('trainingView');
  const bookingView = document.getElementById('bookingView');
  const trainingList = document.getElementById('trainingList');
  const trainingTitle = document.getElementById('trainingTitle');

  let selectedSport = null;
  let selectedTraining = null;

  function show(v){
    [sportView,trainingView,bookingView].forEach(x=>x.style.display='none');
    v.style.display='block';
    v.scrollIntoView({behavior: 'smooth'}); // плавный скролл
  }

  document.querySelectorAll('[data-sport]').forEach(btn=>{
    btn.onclick=()=>{
      selectedSport=btn.dataset.sport;
      loadTrainings(); // сразу показываем тренировки
    };
  });

  document.getElementById('backToSport').onclick=()=>show(sportView);
  document.getElementById('backToTrainings').onclick=()=>show(trainingView);

  async function loadTrainings(){
    trainingList.innerHTML="<div class='muted'>Загрузка...</div>";
    trainingList.innerHTML=`
      <div class='training-item'>
        <div class='title'>Утренняя разминка</div>
        <div class='muted'>Время: 10:00</div>
        <div class='muted'>Тренер: Айтуган</div>
        <button class='btn small' data-id='1' data-name='Утренняя разминка'>Выбрать</button>
      </div>
      <div class='training-item'>
        <div class='title'>Основная тренировка</div>
        <div class='muted'>Время: 15:00</div>
        <div class='muted'>Тренер: Руслан</div>
        <button class='btn small' data-id='2' data-name='Основная тренировка'>Выбрать</button>
      </div>
      <div class='training-item'>
        <div class='title'>Вечерняя тренировка</div>
        <div class='muted'>Время: 19:00</div>
        <div class='muted'>Тренер: Артур</div>
        <button class='btn small' data-id='3' data-name='Вечерняя тренировка'>Выбрать</button>
      </div>
    `;
    document.querySelectorAll('.training-item .title').forEach(t=>t.style.color='#fff');
    show(trainingView);
  }

  trainingList.onclick=e=>{
    const btn=e.target.closest("button[data-id]"); 
    if(!btn) return; 
    selectedTraining={id:btn.dataset.id,name:btn.dataset.name}; 
    trainingTitle.textContent=selectedTraining.name; 
    show(bookingView); 
  };

  document.getElementById('confirmBtn').onclick=()=>{
    alert('Запись отправлена! Ожидайте подтверждения...');
    show(sportView);
  };
</script>
</body>
</html>